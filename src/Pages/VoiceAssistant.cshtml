@page "/assistant"
@model VoiceAgentCSharp.Pages.VoiceAssistantModel
@{
    Layout = "_Layout";
    ViewData["Title"] = Localizer["VoiceAssistant"];
    var currentCulture = CultureInfo.CurrentCulture.Name;
}

<main role="main">
<div class="main-container">
        <!-- Main Title -->
        <h1><span class="brand-l">Voice</span> <span class="brand-ia">Assistant</span></h1>

        <partial name="_VoiceVisualizer" />

        <partial name="_MuteButton" />

        <!-- Top Right Controls -->
        <partial name="_CommonControls" />

        <partial name="_StartButton" />

        <partial name="_ChatControls" />

        @if (User.IsInRole("Admin"))
        {
            <!-- Admin Dashboard Button -->
            <a href="/Admin/CallMonitoring" class="admin-btn" title="@Localizer["CallMonitoringDashboard"]" aria-label="@Localizer["CallMonitoringDashboard"]" target="_blank">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
            </a>
        }

        <partial name="_StatusMonitor" />

        <partial name="_LeftPanel" />

        <partial name="_TracePanel" />

        <partial name="_TranscriptPanel" />
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="settings-modal">
        <div class="settings-content">
            <partial name="_SettingsHeader" />
            <div class="settings-body">
                <partial name="_LanguageSelector" />

                <!-- Voice Live Endpoint -->
                <div class="setting-group">
                    <label for="voiceLiveEndpointInput">@Localizer["VoiceLiveEndpoint"]:</label>
                    <div class="input-group">
                        <input id="voiceLiveEndpointInput" class="form-control" type="url" inputmode="url"
                            placeholder="https://*.cognitiveservices.azure.com" aria-label="@Localizer["VoiceLiveEndpoint"]" />
                    </div>
                    <span class="setting-hint">@Localizer["VoiceLiveEndpointHint"]</span>
                </div>

                <!-- Voice Live API Key -->
                <div class="setting-group">
                    <label for="voiceLiveApiKeyInput">@Localizer["VoiceLiveApiKey"]:</label>
                    <div class="input-group">
                        <input id="voiceLiveApiKeyInput" class="form-control" type="password"
                            placeholder="@Localizer["EnterApiKey"]" aria-label="@Localizer["VoiceLiveApiKey"]" />
                    </div>
                    <span class="setting-hint">@Localizer["VoiceLiveApiKeyHint"]</span>
                </div>

                <!-- Voice Model Selection -->
                <div class="setting-group">
                    <label for="voiceModelSelect">@Localizer["VoiceModel"]:</label>
                    <select id="voiceModelSelect" class="form-control" aria-label="@Localizer["VoiceModel"]"></select>
                    <span class="setting-hint">@Localizer["SelectVoiceModel"]</span>
                </div>

                <!-- Voice Selection -->
                <div class="setting-group">
                    <label for="voiceSelect">@Localizer["Voice"]:</label>
                    <select id="voiceSelect" class="form-control" aria-label="@Localizer["Voice"]"></select>
                    <span class="setting-hint">@Localizer["SelectVoice"]</span>
                </div>

                <!-- Welcome Message -->
                <div class="setting-group">
                    <label for="welcomeMessageInput">@Localizer["GreetingMessage"]:</label>
                    <textarea id="welcomeMessageInput" class="form-control" rows="3"
                        placeholder="@Localizer["EnterWelcomeMessage"]" aria-label="@Localizer["GreetingMessage"]"></textarea>
                    <span class="setting-hint">@Localizer["WelcomeMessageHint"]</span>
                </div>

                <!-- Model Instructions -->
                <div class="setting-group">
                    <label for="modelInstructionsInput">@Localizer["SystemInstructions"] (@Localizer["Optional"]):</label>
                    <textarea id="modelInstructionsInput" class="form-control" rows="5"
                        placeholder="@Localizer["EnterModelInstructions"]" aria-label="@Localizer["SystemInstructions"]"></textarea>
                    <span class="setting-hint">@Localizer["ModelInstructionsHint"]</span>
                </div>

                <!-- Toast Notifications Toggle -->
                <div class="setting-group">
                    <label for="toastNotificationsToggle">
                        <input id="toastNotificationsToggle" type="checkbox" aria-label="@Localizer["ShowNotifications"]" />
                        @Localizer["ShowNotifications"]
                    </label>
                </div>
            </div>
            <partial name="_SettingsFooter" />
        </div>
    </div>
</main>

@section Scripts {
    <script type="module" src="~/js/core/app.js?v=1.0.3" asp-append-version="true"></script>
    <script type="module" src="~/js/ui/app-settings.js" asp-append-version="true"></script>
}

