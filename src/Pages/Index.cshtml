@page
@model VoiceAgentCSharp.Pages.IndexModel
@{
    Layout = "_Layout";
    ViewData["Title"] = Localizer["AppTitle"];
    var currentCulture = CultureInfo.CurrentCulture.Name;
}

<div class="main-container">
        <!-- Main Title -->
        <h1><span class="brand-l">Voice</span> <span class="brand-ia">Live</span></h1>

        <!-- Feature selection grid: 3 boxes linking to Assistant, Agent (this page), and Avatar -->
        <div class="feature-grid" role="navigation" aria-label="@Localizer["FeatureSelection"]">
            <a class="feature-card" href="/Assistant" title="@Localizer["VoiceAssistant"]">
                <div class="feature-icon" aria-hidden="true">
                    <!-- Chat / assistant icon -->
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M7 9h10M7 13h6" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                </div>
                <div class="feature-title">@Localizer["VoiceAssistant"]</div>
            </a>

            <a class="feature-card" href="/VoiceAgent" title="@Localizer["VoiceAgent"]">
                <div class="feature-icon" aria-hidden="true">
                    <!-- Microphone / agent icon -->
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 14a3 3 0 0 0 3-3V5a3 3 0 0 0-6 0v6a3 3 0 0 0 3 3z" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M19 11v1a7 7 0 0 1-14 0v-1" stroke-linecap="round" stroke-linejoin="round"></path>
                        <rect x="11" y="17" width="2" height="3" rx="1"></rect>
                    </svg>
                </div>
                <div class="feature-title">@Localizer["VoiceAgent"]</div>
            </a>

            <a class="feature-card" href="/VoiceAvatar" title="@Localizer["VoiceAvatar"]">
                <div class="feature-icon" aria-hidden="true">
                    <!-- Avatar / user icon -->
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="8" r="3" stroke-linecap="round" stroke-linejoin="round"></circle>
                        <path d="M5.5 20a6.5 6.5 0 0 1 13 0" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                </div>
                <div class="feature-title">@Localizer["VoiceAvatar"]</div>
            </a>
        </div>

        <partial name="_VoiceVisualizer" />

        <partial name="_CommonControls" />

        <partial name="_LeftPanel" />

        <!-- Settings Modal -->
        <div id="settingsModal" class="settings-modal">
            <div class="settings-content">
                <partial name="_SettingsHeader" />
                <div class="settings-body">
                    <!-- Language Selector -->
                    <partial name="_LanguageSelector" />

                    <!-- Theme Selector -->
                    <div class="setting-group">
                        <label for="themeSelect">@Localizer["Theme"]:</label>
                        <select id="themeSelect" class="form-control">
                            <option value="light">@Localizer["Light"]</option>
                            <option value="dark" selected>@Localizer["Dark"]</option>
                        </select>
                        <span class="setting-hint">@Localizer["SelectTheme"]</span>
                    </div>

                    <!-- Visualizer Selector -->
                    <div class="setting-group">
                        <label for="visualizerSelect">@Localizer["Visualizer"]:</label>
                        <select id="visualizerSelect" class="form-control">
                            <option value="oscilloscope">@Localizer["Oscilloscope"]</option>
                            <option value="wave" selected>@Localizer["Wave"]</option>
                            <option value="equalizer">@Localizer["Equalizer"]</option>
                            <option value="cardio">@Localizer["Cardio"]</option>
                            <option value="lines">@Localizer["Lines"]</option>
                            <option value="holographic">@Localizer["Holographic"]</option>
                            <option value="vortex">@Localizer["Vortex"]</option>
                            <option value="tesseract">@Localizer["Tesseract"]</option>
                            <option value="cortana">@Localizer["Cortana"]</option>
                        </select>
                        <span class="setting-hint">@Localizer["SelectVisualizer"]</span>
                    </div>
                </div>
                <partial name="_SettingsFooter" />
            </div>
        </div>

        <!-- Toast Container (for notifications like in Voice Assistant) -->
        <div id="toastContainer" class="toast-container"></div>
    </div>


    <!-- Error Boundary -->
    <div id="errorBoundary" class="error-boundary">
        <div class="error-content">
            <h2>@Localizer["ApplicationError"]</h2>
            <p id="errorMessage"></p>
            <button id="reloadButton" title="@Localizer["ReloadPageTitle"]">@Localizer["ReloadPage"]</button>
        </div>
    </div>

    <!-- Toast Notification Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- (Developer features panel removed) -->

@section Scripts {
    <!-- Lightweight theme toggle for Index (does not load full app) -->
    <script type="module" src="~/js/ui/index-theme.js" asp-append-version="true"></script>
    
    <!-- App settings modal handler -->
    <script type="module" src="~/js/ui/app-settings.js" asp-append-version="true"></script>

    <!-- Initialize Hamburger Menu -->
    <script type="module">
        import { initHamburgerMenu } from '/js/ui/hamburger-menu.js';
        document.addEventListener('DOMContentLoaded', () => {
            initHamburgerMenu();
        });
    </script>
}