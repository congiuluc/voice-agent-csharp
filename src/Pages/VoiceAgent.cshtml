@page
@model VoiceAgentCSharp.Pages.VoiceAgentModel
@{
    Layout = "_Layout";
    ViewData["Title"] = Localizer["VoiceAgent"];
    var currentCulture = CultureInfo.CurrentCulture.Name;
}

<div class="main-container">
        <!-- Main Title -->
        <h1><span class="brand-l">Voice</span> <span class="brand-ia">Agent</span></h1>

        <partial name="_VoiceVisualizer" />

        <partial name="_MuteButton" />

        <!-- Top Right Controls -->
        <partial name="_CommonControls" />

        <partial name="_StartButton" />

        <partial name="_ChatControls" />

        @if (User.IsInRole("Admin"))
        {
            <!-- Admin Dashboard Button -->
            <a href="/Admin/CallMonitoring" class="admin-btn" title="@Localizer["CallMonitoringDashboard"]" aria-label="@Localizer["CallMonitoringDashboard"]" target="_blank">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
            </a>
        }

        <partial name="_StatusMonitor" />

        <partial name="_LeftPanel" />

        <partial name="_TracePanel" />

        <partial name="_TranscriptPanel" />
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="settings-modal">
        <div class="settings-content">
            <partial name="_SettingsHeader" />
            <div class="settings-body">
                <!-- Voice Live Endpoint -->
                <div class="setting-group">
                    <label for="voiceLiveEndpointInput">@Localizer["VoiceLiveEndpoint"]:</label>
                    <div class="input-group">
                        <input id="voiceLiveEndpointInput" class="form-control" type="url" inputmode="url" placeholder="https://*.cognitiveservices.azure.com" aria-label="@Localizer["VoiceLiveEndpoint"]" />
                    </div>
                    <span class="setting-hint">@Localizer["VoiceLiveEndpointHint"]</span>
                </div>
                <div class="setting-group">
                    <label for="voiceLiveApiKeyInput">@Localizer["VoiceLiveApiKey"]:</label>
                    <div class="input-group">
                        <input id="voiceLiveApiKeyInput" class="form-control" type="password" placeholder="@Localizer["EnterApiKey"]" />
                    </div>
                    <span class="setting-hint">@Localizer["VoiceLiveApiKeyHint"]</span>
                </div>
                <div class="setting-group">
                    <label for="foundryProjectInput">@Localizer["FoundryProject"]:</label>
                    <div class="input-group">
                        <input id="foundryProjectInput" class="form-control" type="text" placeholder="@Localizer["EnterProjectName"]" />
                    </div>
                    <span class="setting-hint">@Localizer["FoundryProjectHint"]</span>
                </div>
                <div class="setting-group">
                    <label for="foundryAgentInput">@Localizer["FoundryAgentID"]:</label>
                    <div class="input-group">
                        <input id="foundryAgentInput" class="form-control" type="text" placeholder="@Localizer["EnterAgentID"]" />
                    </div>
                    <span class="setting-hint">@Localizer["FoundryAgentIDHint"]</span>
                </div>
                <div class="setting-group">
                    <label for="voiceModelSelect">@Localizer["VoiceModel"]:</label>
                    <select id="voiceModelSelect" class="form-control"></select>
                    <span class="setting-hint">@Localizer["SelectVoiceModel"]</span>
                </div>
                <div class="setting-group">
                    <label for="voiceSelect">@Localizer["Voice"]:</label>
                    <select id="voiceSelect" class="form-control"></select>
                    <span class="setting-hint">@Localizer["SelectVoice"]</span>
                </div>
                <partial name="_LanguageSelector" />
                <div class="setting-group">
                    <label for="welcomeMessageInput">@Localizer["GreetingMessage"]:</label>
                    <textarea id="welcomeMessageInput" class="form-control" rows="3" placeholder="@Localizer["EnterWelcomeMessage"]"></textarea>
                    <span class="setting-hint">@Localizer["WelcomeMessageHint"]</span>
                </div>
                <div class="setting-group">
                    <label for="modelInstructionsInput">@Localizer["SystemInstructions"]:</label>
                    <textarea id="modelInstructionsInput" class="form-control" rows="4" placeholder="@Localizer["EnterModelInstructions"]"></textarea>
                    <span class="setting-hint">@Localizer["ModelInstructionsHint"]</span>
                </div>
                <div class="setting-group">
                    <label for="toastNotificationsToggle"><input id="toastNotificationsToggle" type="checkbox" />@Localizer["ShowNotifications"]</label>
                </div>
            </div>
            <partial name="_SettingsFooter" />
        </div>
    </div>

@section Scripts {
    <!-- Load application initialization module -->
    <script type="module" src="~/js/handlers/voice-agent.js?v=1.0.3" asp-append-version="true"></script>
    <script type="module" src="~/js/ui/app-settings.js" asp-append-version="true"></script>
}